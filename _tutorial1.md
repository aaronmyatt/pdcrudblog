# Tutorial

Use Pipedown to make a CRUD blog app.

## DB
Pipedown is built on top of Deno, we can use [Deno.Kv](https://deno.land/api@v1.42.4?s=Deno.Kv&unstable=) as our database. There is no limitation to what database you can use in a Pipedown project.

## Posts
To keep things organised, let's create a CRUD pipe to handle our blog post data. We will call it [[postStore]].

Take [[postStore]] for a test drive in the REPL
> `bash ./pdrepl.sh`

### Create ✅
### Read ✅
### Update ✅
### Delete ✅

## Start
How can we serve static content with Pipedown? Servers are just pipes. 
- Server: Request -> Process -> Response
- Pipes: Input -> Process -> Output
  
Pipedown passes a server request to the pipe, it is up to you to do what you want with the request.

Create a pipe, [[start]], that will receive a request and serve a page or handle data.

Run the server:
`deno run -A .pd/start/server.ts`

## API
### CRUD
Now for some blogs posts. In [[start]] check for a route pattern that matches `/api/:action` and setup the appropriate message to call [[postStore]].

### Form
Next, we will need a simple form to write our blog posts. This pipe is already written: [[formPage]]. Extend [[start]] to serve it.

### Ajax
We could also handle posted JSON data with `await input.request.json()` just like you would on the frontend.

## Render post

[//begin]: # "Autogenerated link references for markdown compatibility"
[postStore]: postStore "postStore"
[start]: start "Start"
[formPage]: formPage "FormPage"
[//end]: # "Autogenerated link references"