# Walkthrough
Make a CRUD blog app with Pipedown. Checkout the [[Pipedown Cheatsheet]].

This project contains a simple blog, hostable anywhere, enables `creating, reading, updating and deleting` blog posts. The site has 3 pages:

- / (index/root)
- /post/* (individual posts)
- /form/* (for managing posts)

Run the site locally with: `deno run -A --unstable-kv .pd/start/server.ts`

## [[postStore]]

Conditionally `create, read, update, and delete` posts using `Deno.Kv`. Try it out in the repl!
`./bash repl.sh` and explore the implementation yourself: [[postStore]]

### postStore examples:
```js
await postStore.process({post: {create: {title: "New Blog Post", body: "# New Blog Post \n Some copy"}}})

await postStore.process({post: {read: "new-blog-post"}})

await postStore.process({post: {list: true}})

await postStore.process({post: {update: {slug: "new-blog-post", title: "New Blog Post", body: "# New Blog Post \n Some updated copy"}}})

await postStore.process({post: {delete: "new-blog-post"}})
```

## [[start]]
Route requests to pages or the postStore.

Pipedown automatically generates a server file for you, try it: 

`deno run -A --unstable-kv run ./.pd/start/server.ts`.

## API
### [[start#APIWrite]]
Read the request path and decides which action in [[postStore]] to trigger.

Form data can be submitted to endpoints like `/api/(create|update|delete)`.

### [[start#APIRead]]
Reading one or more blog posts is broken into a separate function since they don't rely on `FormData`.


## Pages
You can easily serve HTML pages, or any other kind of data, by returning a `new Response` or populating `input.body` and `input.responseOptions` with the appropriate content and headers, check the examples: [[start]]

[[start#Index Page]], [[start#Post page]] and [[start#Form]] serve different pages and pull HTML from the `./html` directory.

[[start#Form]] is the most interesting example as it shows how you can conveniently piece together HTML pages using template literals.


[//begin]: # "Autogenerated link references for markdown compatibility"
[postStore]: postStore.md "postStore"
[start]: start.md "Start"
[start#APIWrite]: start.md "Start"
[start#APIRead]: start.md "Start"
[start#Index Page]: start.md "Start"
[start#Post page]: start.md "Start"
[start#Form]: start.md "Start"
[//end]: # "Autogenerated link references"