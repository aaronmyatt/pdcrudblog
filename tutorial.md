# Tutorial

Use Pipedown to make a CRUD blog app. You should be familiar with Pipedown before reading this tutorial. Checkout the [[Pipedown Cheatsheet]] for a quick reference.

## Post Store
[[postStore]]
A conditional pipe that can create, read, update, and delete posts. Try it out in the repl!
`./bash repl.sh`

```js
await postStore.process({post: {create: {title: "New Blog Post", body: "# New Blog Post \n Some copy"}}})

await postStore.process({post: {read: "new-blog-post"}})

await postStore.process({post: {list: true}})

await postStore.process({post: {update: {slug: "new-blog-post", title: "New Blog Post", body: "# New Blog Post \n Some updated copy"}}})

await postStore.process({post: {delete: "new-blog-post"}})
```



## Start Server
[[start]]
A pipe that only executes functions based on a request path.

Pipedown can check a request path, using [URLPatterns](https://developer.mozilla.org/en-US/docs/Web/API/URLPattern). Just prefix a list item with `route:` followed by the pattern to conditionally execute that function.

You can run a pipe as a server like this: `deno run -A --unstable-kv run ./.pd/start/server.ts`. Pipedown automatically generated the server file for you.

```md
## Post page <-- function name (optional)
- route: /post/* <-- URLPattern
- ```ts <-- codeblock becomes a function
    const post = await Deno.readTextFile(`./html/${post}.html`)
    input.body = post;
    input.responseOptions.headers['content-type'] = 'text/html; charset=utf-8'
    ```
```

## API

## Pages

[//begin]: # "Autogenerated link references for markdown compatibility"
[postStore]: postStore "postStore"
[start]: start "Start"
[//end]: # "Autogenerated link references"