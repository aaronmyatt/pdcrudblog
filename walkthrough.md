# Walkthrough

Make a CRUD blog app with Pipedown. Checkout the [[Pipedown Cheatsheet]] first.

This project contains a very rudimentary blog site, that can be hosted anywhere, allows creating, reading, updating and deleting blog posts. The site consists of 3 pages:

- / (index/root)
- /post/* (individual posts)
- /form/* (for managing posts)

The site can be served locally by running: `deno run -A --unstable-kv .pd/start/server.ts`

## [[postStore]]

A conditional pipe that can create, read, update, and delete posts using `Deno.Kv`. Try it out in the repl!
`./bash repl.sh`

```js
await postStore.process({post: {create: {title: "New Blog Post", body: "# New Blog Post \n Some copy"}}})

await postStore.process({post: {read: "new-blog-post"}})

await postStore.process({post: {list: true}})

await postStore.process({post: {update: {slug: "new-blog-post", title: "New Blog Post", body: "# New Blog Post \n Some updated copy"}}})

await postStore.process({post: {delete: "new-blog-post"}})
```



## [[start]]
A pipe that only executes functions based on a request path.

You can run a pipe as a server like this: `deno run -A --unstable-kv run ./.pd/start/server.ts`. Pipedown automatically generated the server file for you.

## API
[[pdcrudblog/start#API]] reads the request path and decides which action in [[pdcrudblog/postStore]] to trigger.

API requests can be made to endpoints like `/api/create`, or, in this case, a form can be submitted to that path.

## Pages
[[pdcrudblog/start#Index Page]], [[pdcrudblog/start#Post page]] and [[pdcrudblog/start#Form]] serve different pages and pull HTML from the `./html` directory.

[[pdcrudblog/start#Form]] is the most interesting example as it shows how you can conveniently piece together HTML pages using template literals.


[//begin]: # "Autogenerated link references for markdown compatibility"
[Pipedown Cheatsheet]: <Pipedown Cheatsheet.md> "Pipedown Cheatsheet"
[postStore]: postStore.md "postStore"
[start]: start.md "Start"
[pdcrudblog/start#API]: start.md "Start"
[pdcrudblog/postStore]: postStore.md "postStore"
[pdcrudblog/start#Index Page]: start.md "Start"
[pdcrudblog/start#Post page]: start.md "Start"
[pdcrudblog/start#Form]: start.md "Start"
[//end]: # "Autogenerated link references"